###############################################################################
#
# IAR ANSI C/C++ Compiler V8.50.9.278/W32 for ARM         28/Oct/2021  14:35:47
# Copyright 1999-2020 IAR Systems AB.
#
#    Cpu mode                        
#    Endian                       =  little
#    Source file                  =
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\FlexMouse\Features\module_application_testing.c
#    Command line                 =
#        -f C:\Users\100001~1\AppData\Local\Temp\EW4955.tmp
#        (C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\FlexMouse\Features\module_application_testing.c
#        -D USE_FULL_LL_DRIVER -D STM32G030xx -D USE_HAL_DRIVER -lC
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM\generic_app_stm32G030K8Tx\List
#        -o
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM\generic_app_stm32G030K8Tx\Obj
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M0+ -e --fpu=None --dlib_config "C:\Program Files
#        (x86)\IAR Systems\Embedded Workbench 8.4\arm\inc\c\DLib_Config_Full.h"
#        -I
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM/../Inc\\
#        -I
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM/../Drivers/STM32G0xx_HAL_Driver/Inc\\
#        -I
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM/../Drivers/CMSIS/Device/ST/STM32G0xx/Include\\
#        -I
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM/../Drivers/CMSIS/Device/ST/STM32G0xx/Source\\
#        -I
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM/../Drivers/CMSIS/Include\\
#        -I
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM/../FlexMouse\\
#        -I
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM/../FlexMouse/Kernel\\
#        -I
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM/../FlexMouse/Drivers\\
#        -I
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM/../FlexMouse/Memory\\
#        -I
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM/../FlexMouse/Features\\
#        -I
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM/../FlexMouse/Regal\\
#        -I
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM/../Drivers/STM32G0xx_HAL_Driver/Inc/Legacy\\
#        -On)
#    Locale                       =  C
#    List file                    =
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM\generic_app_stm32G030K8Tx\List\module_application_testing.lst
#    Object file                  =
#        C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\EWARM\generic_app_stm32G030K8Tx\Obj\module_application_testing.o
#    Runtime model:                  
#      __SystemLibrary            =  DLib
#      __dlib_full_locale_support =  1
#      __dlib_version             =  6
#
###############################################################################

C:\Users\100001305\Documents\GitHub\symax_sri_app\generic_app_GMI\FlexMouse\Features\module_application_testing.c
      1          /**
      2          ********************************************************************************************************************************
      3          * @file    module_applicatin_testing.c 
      4          * @author  Pamela Lee
      5          * @brief   This is the module for supporting FCT, BurnIn and End-of-Line testing for the application.
      6          * @details This application processes requests for test modes and provides data neeed for test mode operation
      7          ********************************************************************************************************************************
      8          */
      9          
     10          /* Includes --------------------------------------------------------------------------------------------------------------------*/
     11          #include "module_application_testing.h"
     12          
     13          //#include "driver_gpio.h"
     14          
     15          /* Content ---------------------------------------------------------------------------------------------------------------------*/
     16          extern ProcessInfo processInfoTable[];
     17          void AssignModuleMemApplicationTesting(void);
     18          
     19          // Global variables specific to this module

   \                                 In section .bss, align 8
     20          uint64_t module_application_testing_poll_time_u64 =0; // Poll time for the module
   \                     module_application_testing_poll_time_u64:
   \        0x0                      DS8 8

   \                                 In section .bss, align 4
     21          Application_Testing_Control applicationTestingControl;
   \                     applicationTestingControl:
   \        0x0                      DS8 16
     22          
     23          enum {
     24            MEMORY_INIT_MODULE,
     25            INIT_MODULE,
     26            RUN_MODULE,
     27            // Ddditional states to be added here as necessary.
     28            IRQ_MODULE = DEFAULT_IRQ_STATE,
     29            KILL_MODULE = KILL_APP
     30          };
     31          
     32          /**
     33          ********************************************************************************************************************************
     34          * @brief   State machine for application testing module
     35          * @details
     36          * @param   drv_identifier_u8, previous_state_u8, next_stat_u8, irq_identfier_u8
     37          * @retval  return_state_u8
     38          ********************************************************************************************************************************
     39          */

   \                                 In section .text, align 2, keep-with-next
     40          uint8_t moduleApplicationTesting_u32(uint8_t drv_identifier_u8, uint8_t previous_state_u8, uint8_t next_state_u8,
     41                                uint8_t irq_identifier_u8)
     42          {
   \                     moduleApplicationTesting_u32: (+1)
   \        0x0   0xB5FB             PUSH     {R0,R1,R3-R7,LR}
   \        0x2   0x0006             MOVS     R6,R0
   \        0x4   0x0017             MOVS     R7,R2
     43            uint8_t return_state_u8 = MEMORY_INIT_MODULE;
   \        0x6   0x2400             MOVS     R4,#+0
     44            switch (next_state_u8)
   \        0x8   0x0038             MOVS     R0,R7
   \        0xA   0xB2C0             UXTB     R0,R0
   \        0xC   0x2800             CMP      R0,#+0
   \        0xE   0xD008             BEQ      ??moduleApplicationTesting_u32_0
   \       0x10   0x2801             CMP      R0,#+1
   \       0x12   0xD00A             BEQ      ??moduleApplicationTesting_u32_1
   \       0x14   0x2802             CMP      R0,#+2
   \       0x16   0xD012             BEQ      ??moduleApplicationTesting_u32_2
   \       0x18   0x28C8             CMP      R0,#+200
   \       0x1A   0xD025             BEQ      ??moduleApplicationTesting_u32_3
   \       0x1C   0x28FF             CMP      R0,#+255
   \       0x1E   0xD025             BEQ      ??moduleApplicationTesting_u32_4
   \       0x20   0xE037             B        ??moduleApplicationTesting_u32_5
     45            {
     46            case MEMORY_INIT_MODULE:
     47              {
     48                AssignModuleMemApplicationTesting(); // Assign structured memory to Analog 0-10V setting and data 
   \                     ??moduleApplicationTesting_u32_0: (+1)
   \       0x22   0x....'....        BL       AssignModuleMemApplicationTesting
     49                return_state_u8 = INIT_MODULE;
   \       0x26   0x2001             MOVS     R0,#+1
     50                break;
   \       0x28   0xE034             B        ??moduleApplicationTesting_u32_6
     51              }
     52            case INIT_MODULE:
     53              {     
     54                // Assign structured memory for module
     55                //AssignModuleMemAppModule();
     56                
     57                module_application_testing_poll_time_u64 = getSysCount() + POLL_TIME; // Store time tick value     
   \                     ??moduleApplicationTesting_u32_1: (+1)
   \       0x2A   0x....'....        BL       getSysCount
   \       0x2E   0x2200             MOVS     R2,#+0
   \       0x30   0x30C8             ADDS     R0,R0,#+200
   \       0x32   0x4151             ADCS     R1,R1,R2
   \       0x34   0x....             LDR      R2,??DataTable0
   \       0x36   0xC203             STM      R2!,{R0,R1}
   \       0x38   0x3A08             SUBS     R2,R2,#+8
     58                
     59                // Get structured memory for GPIO module data
     60                //uint8_t module_drv_Gpio_Index = getProcessInfoIndex(MODULE_GPIO);
     61                //gpio_LocalControl = (Gpio_Control*)((*(processInfoTable[module_drv_Gpio_Index].Sched_ModuleData.p_masterSharedMem_u32)).p_ramBuf_u8);
     62                
     63                return_state_u8 = RUN_MODULE;
   \       0x3A   0x2002             MOVS     R0,#+2
     64                break;
   \       0x3C   0xE02A             B        ??moduleApplicationTesting_u32_6
     65                
     66              }   
     67            case RUN_MODULE:                                                             
     68              {
     69                // Process analog input every "AnalogPeriod" mSec
     70                if (getSysCount() >= module_application_testing_poll_time_u64) // Time above poll time
   \                     ??moduleApplicationTesting_u32_2: (+1)
   \       0x3E   0x....'....        BL       getSysCount
   \       0x42   0x0002             MOVS     R2,R0
   \       0x44   0x000B             MOVS     R3,R1
   \       0x46   0x....             LDR      R5,??DataTable0
   \       0x48   0xCD03             LDM      R5!,{R0,R1}
   \       0x4A   0x3D08             SUBS     R5,R5,#+8
   \       0x4C   0x428B             CMP      R3,R1
   \       0x4E   0xD309             BCC      ??moduleApplicationTesting_u32_7
   \       0x50   0xD801             BHI      ??moduleApplicationTesting_u32_8
   \       0x52   0x4282             CMP      R2,R0
   \       0x54   0xD306             BCC      ??moduleApplicationTesting_u32_7
     71                {
     72                  module_application_testing_poll_time_u64 = getSysCount() + POLL_TIME; // Next poll time
   \                     ??moduleApplicationTesting_u32_8: (+1)
   \       0x56   0x....'....        BL       getSysCount
   \       0x5A   0x2200             MOVS     R2,#+0
   \       0x5C   0x30C8             ADDS     R0,R0,#+200
   \       0x5E   0x4151             ADCS     R1,R1,R2
   \       0x60   0xC503             STM      R5!,{R0,R1}
   \       0x62   0x3D08             SUBS     R5,R5,#+8
     73                  // User Code        
     74                }
     75                return_state_u8 = RUN_MODULE;
   \                     ??moduleApplicationTesting_u32_7: (+1)
   \       0x64   0x2002             MOVS     R0,#+2
     76                break;
   \       0x66   0xE015             B        ??moduleApplicationTesting_u32_6
     77              }
     78            case IRQ_MODULE: 
     79              {
     80                // If there are more than one interrupts, from different drivers, you can identify each individually by:
     81                // tableIndex_u8 = getProcessInfoIndex(irq_identifier_u8);
     82                // Then use processInfoTable[tableIndex_u8] to tailor your response appropriately.
     83                return_state_u8 = RUN_MODULE;
   \                     ??moduleApplicationTesting_u32_3: (+1)
   \       0x68   0x2002             MOVS     R0,#+2
     84                break;
   \       0x6A   0xE013             B        ??moduleApplicationTesting_u32_6
     85              }
     86              
     87            case KILL_MODULE: 
     88              {
     89                // Setting processStatus_u8 to PROCESS_STATUS_KILLED prevents the scheduler main loop from calling this module again.
     90                uint8_t table_index_u8 = getProcessInfoIndex(drv_identifier_u8);
   \                     ??moduleApplicationTesting_u32_4: (+1)
   \       0x6C   0x0030             MOVS     R0,R6
   \       0x6E   0xB2C0             UXTB     R0,R0
   \       0x70   0x....'....        BL       getProcessInfoIndex
   \       0x74   0x0001             MOVS     R1,R0
     91                if (table_index_u8 != INDEX_NOT_FOUND) {
   \       0x76   0x0008             MOVS     R0,R1
   \       0x78   0xB2C0             UXTB     R0,R0
   \       0x7A   0x28FF             CMP      R0,#+255
   \       0x7C   0xD007             BEQ      ??moduleApplicationTesting_u32_9
     92                  processInfoTable[table_index_u8].Sched_DrvData.processStatus_u8 = PROCESS_STATUS_KILLED;
   \       0x7E   0x20FF             MOVS     R0,#+255
   \       0x80   0x....             LDR      R2,??DataTable0_1
   \       0x82   0x000B             MOVS     R3,R1
   \       0x84   0xB2DB             UXTB     R3,R3
   \       0x86   0x2516             MOVS     R5,#+22
   \       0x88   0x436B             MULS     R3,R5,R3
   \       0x8A   0x18D2             ADDS     R2,R2,R3
   \       0x8C   0x7290             STRB     R0,[R2, #+10]
     93                }
     94                return_state_u8 = INIT_MODULE;
   \                     ??moduleApplicationTesting_u32_9: (+1)
   \       0x8E   0x2001             MOVS     R0,#+1
     95                break;
   \       0x90   0xE000             B        ??moduleApplicationTesting_u32_6
     96              }
     97            default:
     98              {
     99                return_state_u8 = KILL_MODULE; //10; 
   \                     ??moduleApplicationTesting_u32_5: (+1)
   \       0x92   0x20FF             MOVS     R0,#+255
    100                break;
    101              }
    102            }
    103            return return_state_u8;
   \                     ??moduleApplicationTesting_u32_6: (+1)
   \       0x94   0xB2C0             UXTB     R0,R0
   \       0x96   0xBDFE             POP      {R1-R7,PC}       ;; return
    104          }
    105          
    106          /**
    107          ********************************************************************************************************************************
    108          * @brief   Assign structured memory
    109          * @details Assign structured memory for App module
    110          * @param   None 
    111          * @return  None
    112          ********************************************************************************************************************************
    113          */

   \                                 In section .text, align 2, keep-with-next
    114          void AssignModuleMemApplicationTesting(void){   
    115            //gpio_StructMem_u32 =  StructMem_CreateInstance(MODULE_GPIO, sizeof(Gpio_Control), ACCESS_MODE_WRITE_ONLY, NULL, EMPTY_LIST);
    116            //(*gpio_StructMem_u32).p_ramBuf_u8 = (uint8_t *)&gpio_Control ;    // Map the ADC1 memory into the structured memory
    117            //uint8_t module_gpio_index_u8 = getProcessInfoIndex(MODULE_GPIO);
    118            //processInfoTable[module_gpio_index_u8].Sched_ModuleData.p_masterSharedMem_u32 = (Ram_Buf_Handle)gpio_StructMem_u32;
    119          }
   \                     AssignModuleMemApplicationTesting: (+1)
   \        0x0   0x4770             BX       LR               ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable0:
   \        0x0   0x....'....        DC32     module_application_testing_poll_time_u64

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable0_1:
   \        0x0   0x....'....        DC32     processInfoTable

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   AssignModuleMemApplicationTesting
      32   moduleApplicationTesting_u32
        32   -> AssignModuleMemApplicationTesting
        32   -> getProcessInfoIndex
        32   -> getSysCount


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable0
       4  ??DataTable0_1
       2  AssignModuleMemApplicationTesting
      16  applicationTestingControl
     152  moduleApplicationTesting_u32
       8  module_application_testing_poll_time_u64

 
  24 bytes in section .bss
 162 bytes in section .text
 
 162 bytes of CODE memory
  24 bytes of DATA memory

Errors: none
Warnings: none
